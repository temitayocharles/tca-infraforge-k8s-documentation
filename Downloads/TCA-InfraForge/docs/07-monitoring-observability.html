<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCA InfraForge Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 20px auto;
            padding: 30px;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .pagination {
            justify-content: center;
        }

        .page-link {
            color: #667eea;
        }

        .page-link:hover {
            color: #764ba2;
        }

        .btn-prev,
        .btn-next {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            color: white;
        }

        .btn-prev:hover,
        .btn-next:hover {
            background: linear-gradient(45deg, #764ba2, #667eea);
            color: white;
        }

        h1,
        h2,
        h3 {
            color: #333;
        }

        code {
            background: #f8f9fa;
            padding: 2px 4px;
            border-radius: 4px;
        }

        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        .emoji {
            font-size: 1.2em;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: #ecf0f1;
        }

        body.dark-mode .container {
            background: #2c3e50;
            color: #ecf0f1;
        }

        body.dark-mode .navbar {
            background: rgba(44, 62, 80, 0.9);
        }

        body.dark-mode h1, body.dark-mode h2, body.dark-mode h3 {
            color: #ecf0f1;
        }

        body.dark-mode code {
            background: #34495e;
            color: #ecf0f1;
        }

        body.dark-mode pre {
            background: #34495e;
            color: #ecf0f1;
        }

        body.dark-mode table th {
            background-color: #34495e;
        }

        body.dark-mode table td {
            border-color: #7f8c8d;
        }

        .copy-btn {
            opacity: 0.7;
        }

        .copy-btn:hover {
            opacity: 1;
        }

        .content {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">TCA InfraForge Docs</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Pages</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="01-executive-summary.html">1. Executive Summary</a></li>
                            <li><a class="dropdown-item" href="02-architecture-overview.html">2. Architecture
                                    Overview</a></li>
                            <li><a class="dropdown-item" href="03-quick-start-guide.html">3. Quick Start Guide</a></li>
                            <li><a class="dropdown-item" href="04-automated-deployment.html">4. Automated Deployment</a>
                            </li>
                            <li><a class="dropdown-item" href="05-container-kubernetes.html">5. Container &
                                    <img src="https://kubernetes.io/images/favicon.png" alt="Kubernetes"
                                        style="height:1.2em; vertical-align:middle;"> Kubernetes</a></li>
                            <li><a class="dropdown-item" href="06-networking-ingress.html">6. Networking & Ingress</a>
                            </li>
                            <li><a class="dropdown-item" href="07-monitoring-observability.html">7. Monitoring &
                                    Observability</a></li>
                            <li><a class="dropdown-item" href="08-enterprise-applications.html">8. Enterprise
                                    Applications</a></li>
                            <li><a class="dropdown-item" href="09-security-compliance.html">9. Security & Compliance</a>
                            </li>
                            <li><a class="dropdown-item" href="10-cloudflare-integration.html">10. Cloudflare
                                    Integration</a></li>
                            <li><a class="dropdown-item" href="11-performance-optimization.html">11. Performance
                                    Optimization</a></li>
                            <li><a class="dropdown-item" href="12-ci-cd-pipeline.html">12. CI/CD Pipeline</a></li>
                            <li><a class="dropdown-item" href="13-contributing-development.html">13. Contributing &
                                    Development</a></li>
                        </ul>
                    </li>
                </ul>
                <form class="d-flex me-2">
                    <input class="form-control me-2" type="search" placeholder="Search headings..." id="searchInput">
                </form>
                <div class="d-flex">
                    <button class="btn btn-outline-secondary me-2" id="darkModeToggle">
                        <i class="fas fa-moon"></i> Dark
                    </button>
                    <button class="btn btn-prev me-2" id="prevBtn">Previous</button>
                    <button class="btn btn-next" id="nextBtn">Next</button>
                </div>
            </div>
        </div>
    </nav>

    <div id="progressBar" style="height: 4px; background: linear-gradient(45deg, #667eea, #764ba2); width: 0%; position: fixed; top: 0; left: 0; z-index: 1000;"></div>

    <div class="container">
        <nav aria-label="Page navigation">
            <ul class="pagination" id="pagination">
                <!-- Pagination will be generated by JS -->
            </ul>
        </nav>

        <div class="content">
            <h1 id="chapter-7-monitoring-observability">ğŸ“Š Chapter 7: Monitoring &amp; Observability</h1>
<h2 id="learning-objectives">ğŸ¯ Learning Objectives</h2>
<p>By the end of this chapter, youâ€™ll understand: - How TCA InfraForge provides complete observability - Setting up and using Prometheus, Grafana, and AlertManager - Creating custom dashboards and alerts - Monitoring best practices for enterprise environments</p>
<p><strong>â±ï¸ Time to Complete:</strong> 25-30 minutes<br />
<strong>ğŸ’¡ Difficulty:</strong> Intermediate<br />
<strong>ğŸ¯ Prerequisites:</strong> Basic understanding of containers and deployment</p>
<hr />
<h2 id="observability-philosophy">ğŸ‘ï¸ Observability Philosophy</h2>
<p>TCA InfraForge treats <strong>observability as a first-class citizen</strong>. Instead of reactive monitoring, we provide <strong>proactive insights</strong> that help you understand, optimize, and troubleshoot your platform before issues become problems.</p>
<h3 id="the-three-pillars-of-observability">The Three Pillars of Observability</h3>
<ul>
<li><strong>ğŸ“Š Metrics:</strong> Quantitative measurements of system performance</li>
<li><strong>ğŸ“ Logs:</strong> Detailed records of system events and activities</li>
<li><strong>ğŸ” Traces:</strong> Request flow visualization across services</li>
</ul>
<p><strong>Real-world analogy:</strong> Like having a complete dashboard in your car that shows speed, fuel level, engine health, and even predicts when maintenance is needed.</p>
<hr />
<h2 id="monitoring-stack-architecture">ğŸ—ï¸ Monitoring Stack Architecture</h2>
<h3 id="complete-observability-stack">Complete Observability Stack</h3>
<pre class="mermaid"><code>graph TB
    subgraph &quot;Data Collection&quot;
        NODE_EXPORTER[ğŸ“ˆ Node Exporter&lt;br/&gt;System Metrics]
        APP_METRICS[ğŸ“± Application Metrics&lt;br/&gt;Custom KPIs]
        LOG_SOURCES[ğŸ“œ Log Sources&lt;br/&gt;Application Logs]
    end

    subgraph &quot;Metrics Pipeline&quot;
        PROMETHEUS[ğŸ“Š Prometheus&lt;br/&gt;Time-Series DB&lt;br/&gt;Metrics Collection]
        PROMETHEUS --&gt; ALERTMANAGER[ğŸš¨ AlertManager&lt;br/&gt;Alert Routing]
    end

    subgraph &quot;Visualization&quot;
        GRAFANA[ğŸ“Š Grafana&lt;br/&gt;Dashboards&lt;br/&gt;Data Visualization]
    end

    subgraph &quot;Log Aggregation&quot;
        FLUENT_BIT[ğŸ”„ Fluent Bit&lt;br/&gt;Log Collection]
        ELASTICSEARCH[(ğŸ” Elasticsearch&lt;br/&gt;Log Storage)]
        KIBANA[ğŸ“Š Kibana&lt;br/&gt;Log Analysis]
    end

    NODE_EXPORTER --&gt; PROMETHEUS
    APP_METRICS --&gt; PROMETHEUS
    LOG_SOURCES --&gt; FLUENT_BIT
    FLUENT_BIT --&gt; ELASTICSEARCH
    ELASTICSEARCH --&gt; KIBANA
    PROMETHEUS --&gt; GRAFANA
    ALERTMANAGER --&gt; NOTIFICATIONS[ğŸ“¢ Notifications&lt;br/&gt;Email/Slack/PagerDuty]</code></pre>
<h3 id="component-roles">Component Roles</h3>
<h4 id="prometheus---the-metrics-brain">Prometheus - The Metrics Brain</h4>
<ul>
<li><strong>ğŸ“Š Time-Series Database:</strong> Stores all metrics data</li>
<li><strong>ğŸ” Query Language:</strong> Powerful PromQL for data analysis</li>
<li><strong>ğŸš¨ Alerting Engine:</strong> Triggers alerts based on conditions</li>
<li><strong>ğŸ“ˆ Auto-Discovery:</strong> Automatically finds services to monitor</li>
</ul>
<h4 id="grafana---the-visualization-expert">Grafana - The Visualization Expert</h4>
<ul>
<li><strong>ğŸ“Š Dashboard Creation:</strong> Beautiful, interactive visualizations</li>
<li><strong>ğŸ”— Data Sources:</strong> Connects to multiple data sources</li>
<li><strong>ğŸ‘¥ Sharing:</strong> Team collaboration and dashboard sharing</li>
<li><strong>ğŸ“± Mobile Support:</strong> Access dashboards on any device</li>
</ul>
<h4 id="alertmanager---the-notification-hub">AlertManager - The Notification Hub</h4>
<ul>
<li><strong>ğŸ“¢ Routing:</strong> Smart alert routing based on severity</li>
<li><strong>ğŸ”‡ Silencing:</strong> Temporary alert suppression</li>
<li><strong>ğŸ‘¥ Grouping:</strong> Prevents alert storms</li>
<li><strong>ğŸ”„ Integration:</strong> Connects to email, Slack, PagerDuty, etc.</li>
</ul>
<hr />
<h2 id="getting-started-with-monitoring">ğŸš€ Getting Started with Monitoring</h2>
<h3 id="accessing-your-monitoring-stack">Accessing Your Monitoring Stack</h3>
<p>After deployment, TCA InfraForge provides these monitoring endpoints:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grafana Dashboard (Main Monitoring Interface)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># URL: https://localhost:3000</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Default Credentials: admin / admin (change immediately!)</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prometheus Metrics Database</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># URL: https://localhost:9090</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Direct access to metrics and query interface</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># AlertManager (Alert Management)</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># URL: https://localhost:9093</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Configure alert routing and silencing</span></span></code></pre></div>
<h3 id="first-login-setup">First Login Setup</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Open Grafana in your browser</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">open</span> https://localhost:3000</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Login with default credentials</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Username:</span> admin</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Password:</span> admin</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Change password immediately</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Explore the pre-configured dashboards</span></span></code></pre></div>
<hr />
<h2 id="pre-configured-dashboards">ğŸ“Š Pre-Configured Dashboards</h2>
<p>TCA InfraForge comes with <strong>production-ready dashboards</strong> covering all aspects of your platform:</p>
<h3 id="infrastructure-overview-dashboard">Infrastructure Overview Dashboard</h3>
<p><strong>What it shows:</strong> Complete system health at a glance - ğŸ–¥ï¸ <strong>Node Resources:</strong> CPU, memory, disk usage across all nodes - ğŸŒ <strong>Network Traffic:</strong> Bandwidth utilization and error rates - ğŸ“¦ <strong>Container Metrics:</strong> Pod status, restarts, resource usage - ğŸ’¾ <strong>Storage:</strong> Disk I/O, space utilization, volume health</p>
<p><strong>Key Metrics:</strong></p>
<pre><code>CPU Usage: Current % and trends
Memory Usage: RAM consumption patterns
Disk I/O: Read/write operations per second
Network: Bandwidth and packet rates</code></pre>
<h3 id="application-performance-dashboard">Application Performance Dashboard</h3>
<p><strong>What it shows:</strong> How your applications are performing - âš¡ <strong>Response Times:</strong> API latency and throughput - ğŸ“ˆ <strong>Request Rates:</strong> RPS (requests per second) - âŒ <strong>Error Rates:</strong> 4xx/5xx error percentages - ğŸ‘¥ <strong>Active Users:</strong> Concurrent user counts</p>
<p><strong>Business KPIs:</strong></p>
<pre><code>API Response Time: &lt; 100ms target
Error Rate: &lt; 1% target
Throughput: &gt; 1000 RPS target
Availability: &gt; 99.9% uptime</code></pre>
<h3 id="database-performance-dashboard">Database Performance Dashboard</h3>
<p><strong>What it shows:</strong> Database health and performance - ğŸ” <strong>Query Performance:</strong> Slow query analysis - ğŸ’¾ <strong>Connection Pool:</strong> Active/idle connections - ğŸ“Š <strong>Storage Growth:</strong> Database size trends - ğŸ”„ <strong>Replication Status:</strong> Master-slave synchronization</p>
<p><strong>Database Metrics:</strong></p>
<pre><code>Query Response Time: &lt; 50ms
Connection Utilization: &lt; 80%
Storage Growth Rate: &lt; 10GB/month
Replication Lag: &lt; 1 second</code></pre>
<h3 id="security-monitoring-dashboard">Security Monitoring Dashboard</h3>
<p><strong>What it shows:</strong> Security events and compliance status - ğŸš¨ <strong>Failed Logins:</strong> Authentication failure patterns - ğŸ›¡ï¸ <strong>Firewall Events:</strong> Blocked connection attempts - ğŸ“œ <strong>Audit Events:</strong> Security-relevant activities - ğŸ” <strong>Compliance Status:</strong> Policy violation tracking</p>
<p><strong>Security KPIs:</strong></p>
<pre><code>Failed Login Attempts: &lt; 5/hour
Suspicious Activities: 0
Policy Violations: 0
Compliance Score: 100%</code></pre>
<hr />
<h2 id="creating-custom-dashboards">ğŸ¨ Creating Custom Dashboards</h2>
<h3 id="step-by-step-dashboard-creation">Step-by-Step Dashboard Creation</h3>
<h4 id="access-grafana-dashboard-builder">1. Access Grafana Dashboard Builder</h4>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Open Grafana</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">open</span> https://localhost:3000</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Navigate to: Create â†’ Dashboard</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Click &quot;Add new panel&quot;</span></span></code></pre></div>
<h4 id="choose-your-data-source">2. Choose Your Data Source</h4>
<pre><code>Data Source: Prometheus
Query Type: PromQL (Prometheus Query Language)</code></pre>
<h4 id="build-your-first-panel">3. Build Your First Panel</h4>
<p><strong>Example: CPU Usage Over Time</strong></p>
<pre><code># PromQL Query
rate(cpu_usage_percent[5m]) * 100

# Panel Settings
Title: CPU Usage %
Type: Time Series
Unit: Percent (0-100)
Thresholds: Warning &gt; 80%, Critical &gt; 90%</code></pre>
<h4 id="add-multiple-panels">4. Add Multiple Panels</h4>
<p><strong>Common Panel Types:</strong> - <strong>Time Series:</strong> Trends over time (CPU, memory, network) - <strong>Gauge:</strong> Current status (disk usage, temperature) - <strong>Table:</strong> Detailed metrics (top processes, error logs) - <strong>Heatmap:</strong> Frequency distribution (response times) - <strong>Stat:</strong> Single value with trend (total requests)</p>
<h3 id="advanced-dashboard-features">Advanced Dashboard Features</h3>
<h4 id="variables-for-dynamic-dashboards">Variables for Dynamic Dashboards</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dashboard Variable Configuration</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">variable_name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;namespace&quot;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">query</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;kube_namespace&quot;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Kubernetes Namespace&quot;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">multi_value</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<h4 id="template-variables-usage">Template Variables Usage</h4>
<pre><code># Query with variable
sum(rate(http_requests_total{namespace=&quot;$namespace&quot;}[5m]))</code></pre>
<h4 id="drill-down-capabilities">Drill-Down Capabilities</h4>
<ul>
<li><strong>Click on panels</strong> to see detailed breakdowns</li>
<li><strong>Time range selection</strong> for focused analysis</li>
<li><strong>Legend interactions</strong> to show/hide data series</li>
</ul>
<hr />
<h2 id="alerting-notification-setup">ğŸš¨ Alerting &amp; Notification Setup</h2>
<h3 id="creating-effective-alerts">Creating Effective Alerts</h3>
<h4 id="define-alert-conditions">1. Define Alert Conditions</h4>
<p><strong>Example: High CPU Usage Alert</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alert Rule Configuration</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">alert</span><span class="kw">:</span><span class="at"> HighCPUUsage</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">expr</span><span class="kw">:</span><span class="at"> cpu_usage_percent &gt; 85</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">for</span><span class="kw">:</span><span class="at"> 5m</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">severity</span><span class="kw">:</span><span class="at"> warning</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">annotations</span><span class="kw">:</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">summary</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;High CPU usage detected&quot;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;CPU usage is above 85% for more than 5 minutes&quot;</span></span></code></pre></div>
<h4 id="configure-alert-routing">2. Configure Alert Routing</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># AlertManager Configuration</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">route</span><span class="kw">:</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">group_by</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&#39;alertname&#39;</span><span class="kw">,</span><span class="at"> </span><span class="st">&#39;severity&#39;</span><span class="kw">]</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">group_wait</span><span class="kw">:</span><span class="at"> 10s</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">group_interval</span><span class="kw">:</span><span class="at"> 10s</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">repeat_interval</span><span class="kw">:</span><span class="at"> 1h</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">receiver</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;slack-notifications&#39;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="fu">receivers</span><span class="kw">:</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;slack-notifications&#39;</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">slack_configs</span><span class="kw">:</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">api_url</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;YOUR_SLACK_WEBHOOK_URL&#39;</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">channel</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;#alerts&#39;</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{{ .GroupLabels.alertname }}&#39;</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">text</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{{ .CommonAnnotations.description }}&#39;</span></span></code></pre></div>
<h4 id="set-up-notification-channels">3. Set Up Notification Channels</h4>
<p><strong>Email Notifications:</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">receivers</span><span class="kw">:</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;email-notifications&#39;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">email_configs</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">to</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;team@company.com&#39;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">from</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;alerts@tca-infraforge.com&#39;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">smpt_smarthost</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;smtp.gmail.com:587&#39;</span></span></code></pre></div>
<p><strong>Slack Integration:</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">receivers</span><span class="kw">:</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;slack-alerts&#39;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">slack_configs</span><span class="kw">:</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">api_url</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;YOUR_SLACK_WEBHOOK_URL&#39;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">channel</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;#platform-alerts&#39;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;ğŸš¨ {{ .GroupLabels.alertname }}&#39;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">text</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;{{ .CommonAnnotations.summary }}&#39;</span></span></code></pre></div>
<p><strong>PagerDuty Escalation:</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">receivers</span><span class="kw">:</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;pagerduty-critical&#39;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pagerduty_configs</span><span class="kw">:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">routing_key</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;YOUR_PAGERDUTY_KEY&#39;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">severity</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;critical&#39;</span></span></code></pre></div>
<h3 id="alert-best-practices">Alert Best Practices</h3>
<h4 id="alert-severity-levels">Alert Severity Levels</h4>
<ul>
<li><strong>ğŸ”´ Critical:</strong> System down, data loss, security breach</li>
<li><strong>ğŸŸ  Warning:</strong> Performance degradation, resource exhaustion</li>
<li><strong>ğŸŸ¡ Info:</strong> Notable events, trend changes</li>
<li><strong>ğŸ”µ Debug:</strong> Detailed diagnostic information</li>
</ul>
<h4 id="alert-guidelines">Alert Guidelines</h4>
<ul>
<li><strong>ğŸ“ Thresholds:</strong> Set based on historical data, not guesses</li>
<li><strong>â±ï¸ Duration:</strong> Use <code>for</code> clause to prevent false alerts</li>
<li><strong>ğŸ¯ Specificity:</strong> Include context (which service, what metric)</li>
<li><strong>ğŸ”‡ Silencing:</strong> Plan for maintenance windows</li>
<li><strong>ğŸ“Š Aggregation:</strong> Group related alerts to prevent storms</li>
</ul>
<hr />
<h2 id="log-management-analysis">ğŸ“ Log Management &amp; Analysis</h2>
<h3 id="centralized-logging-architecture">Centralized Logging Architecture</h3>
<pre class="mermaid"><code>graph LR
    subgraph &quot;Application Logs&quot;
        API[ğŸ”Œ API Server Logs]
        DB[ğŸ’¾ Database Logs]
        WEB[ğŸŒ Web Server Logs]
    end

    subgraph &quot;Collection Layer&quot;
        FLUENT_BIT[ğŸ”„ Fluent Bit&lt;br/&gt;Log Collector]
    end

    subgraph &quot;Storage &amp; Analysis&quot;
        ELASTICSEARCH[(ğŸ” Elasticsearch&lt;br/&gt;Log Storage)]
        KIBANA[ğŸ“Š Kibana&lt;br/&gt;Log Visualization]
    end

    API --&gt; FLUENT_BIT
    DB --&gt; FLUENT_BIT
    WEB --&gt; FLUENT_BIT
    FLUENT_BIT --&gt; ELASTICSEARCH
    ELASTICSEARCH --&gt; KIBANA</code></pre>
<h3 id="log-analysis-with-kibana">Log Analysis with Kibana</h3>
<h4 id="access-kibana">1. Access Kibana</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Open Kibana interface</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">open</span> https://localhost:5601</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Default credentials (change immediately!)</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Username:</span> elastic</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Password:</span> changeme</span></code></pre></div>
<h4 id="create-log-dashboards">2. Create Log Dashboards</h4>
<p><strong>Common Log Analysis Patterns:</strong> - <strong>Error Tracking:</strong> Filter logs by severity level - <strong>Performance Analysis:</strong> Response time distributions - <strong>User Behavior:</strong> API endpoint usage patterns - <strong>Security Events:</strong> Authentication and authorization logs</p>
<h4 id="advanced-log-queries">3. Advanced Log Queries</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="er">//</span> <span class="er">Find</span> <span class="er">all</span> <span class="er">errors</span> <span class="er">in</span> <span class="er">the</span> <span class="er">last</span> <span class="er">hour</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;query&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;bool&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;must&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span> <span class="dt">&quot;match&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;level&quot;</span><span class="fu">:</span> <span class="st">&quot;ERROR&quot;</span> <span class="fu">}</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span> <span class="dt">&quot;range&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;@timestamp&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;gte&quot;</span><span class="fu">:</span> <span class="st">&quot;now-1h&quot;</span> <span class="fu">}</span> <span class="fu">}</span> <span class="fu">}</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="er">//</span> <span class="er">Performance</span> <span class="er">analysis</span> <span class="er">query</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;query&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;bool&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;must&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span> <span class="dt">&quot;match&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;endpoint&quot;</span><span class="fu">:</span> <span class="st">&quot;/api/users&quot;</span> <span class="fu">}</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span> <span class="dt">&quot;range&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;response_time&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;gte&quot;</span><span class="fu">:</span> <span class="dv">1000</span> <span class="fu">}</span> <span class="fu">}</span> <span class="fu">}</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 id="custom-metrics-business-kpis">ğŸ“ˆ Custom Metrics &amp; Business KPIs</h2>
<h3 id="application-specific-metrics">Application-Specific Metrics</h3>
<h4 id="api-performance-metrics">API Performance Metrics</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Custom metrics in Python Flask app</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> prometheus_client <span class="im">import</span> Counter, Histogram, Gauge</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Request counter</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>REQUEST_COUNT <span class="op">=</span> Counter(</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;http_requests_total&#39;</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Total HTTP requests&#39;</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    [<span class="st">&#39;method&#39;</span>, <span class="st">&#39;endpoint&#39;</span>, <span class="st">&#39;status&#39;</span>]</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Response time histogram</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>REQUEST_LATENCY <span class="op">=</span> Histogram(</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;http_request_duration_seconds&#39;</span>,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;HTTP request latency&#39;</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    [<span class="st">&#39;method&#39;</span>, <span class="st">&#39;endpoint&#39;</span>]</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Active connections gauge</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>ACTIVE_CONNECTIONS <span class="op">=</span> Gauge(</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;active_connections&#39;</span>,</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Number of active connections&#39;</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage in Flask routes</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/api/users&#39;</span>)</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_users():</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> REQUEST_LATENCY.labels(<span class="st">&#39;GET&#39;</span>, <span class="st">&#39;/api/users&#39;</span>).time():</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>        users <span class="op">=</span> get_users_from_db()</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>        REQUEST_COUNT.labels(<span class="st">&#39;GET&#39;</span>, <span class="st">&#39;/api/users&#39;</span>, <span class="st">&#39;200&#39;</span>).inc()</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> jsonify(users)</span></code></pre></div>
<h4 id="business-metrics">Business Metrics</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Business KPI tracking</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>USER_REGISTRATIONS <span class="op">=</span> Counter(</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;user_registrations_total&#39;</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Total user registrations&#39;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>ORDER_VALUE <span class="op">=</span> Histogram(</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;order_value_dollars&#39;</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Order value in dollars&#39;</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    buckets<span class="op">=</span>[<span class="dv">10</span>, <span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">500</span>, <span class="dv">1000</span>]</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>FEATURE_USAGE <span class="op">=</span> Counter(</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;feature_usage_total&#39;</span>,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Feature usage by users&#39;</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    [<span class="st">&#39;feature_name&#39;</span>, <span class="st">&#39;user_type&#39;</span>]</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<h3 id="database-metrics">Database Metrics</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- PostgreSQL custom metrics</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> EXTENSION <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> pg_stat_statements;</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Query performance monitoring</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">query</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    calls,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    total_time <span class="op">/</span> calls <span class="kw">as</span> avg_time,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">rows</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> pg_stat_statements</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> total_time <span class="kw">DESC</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<hr />
<h2 id="monitoring-best-practices">ğŸ”§ Monitoring Best Practices</h2>
<h3 id="dashboard-organization">Dashboard Organization</h3>
<ul>
<li><strong>ğŸ“ Folder Structure:</strong> Group dashboards by function (Infrastructure, Applications, Business)</li>
<li><strong>ğŸ·ï¸ Naming Convention:</strong> Use consistent naming (e.g., â€œINFRA - CPU Usageâ€, â€œAPP - API Performanceâ€)</li>
<li><strong>ğŸ”’ Access Control:</strong> Set appropriate permissions for different user roles</li>
<li><strong>ğŸ“š Documentation:</strong> Add descriptions to panels explaining what they show</li>
</ul>
<h3 id="alert-management">Alert Management</h3>
<ul>
<li><strong>ğŸ¯ Alert Fatigue Prevention:</strong> Only alert on actionable issues</li>
<li><strong>ğŸ”‡ Maintenance Windows:</strong> Silence alerts during planned maintenance</li>
<li><strong>ğŸ“Š Alert Quality Review:</strong> Regularly review and tune alert thresholds</li>
<li><strong>ğŸ‘¥ Escalation Paths:</strong> Define clear escalation procedures</li>
</ul>
<h3 id="performance-optimization">Performance Optimization</h3>
<ul>
<li><strong>ğŸ“Š Data Retention:</strong> Configure appropriate retention periods</li>
<li><strong>ğŸ” Query Optimization:</strong> Use efficient PromQL queries</li>
<li><strong>ğŸ“ˆ Downsampling:</strong> Aggregate old data to save storage</li>
<li><strong>ğŸŒ Network Efficiency:</strong> Use appropriate scrape intervals</li>
</ul>
<h3 id="security-considerations">Security Considerations</h3>
<ul>
<li><strong>ğŸ” Access Control:</strong> Implement role-based access to monitoring data</li>
<li><strong>ğŸ“œ Audit Logging:</strong> Track who accesses monitoring dashboards</li>
<li><strong>ğŸ”’ Data Encryption:</strong> Ensure metrics data is encrypted in transit and at rest</li>
<li><strong>ğŸ›¡ï¸ Network Security:</strong> Restrict monitoring access to authorized networks</li>
</ul>
<hr />
<h2 id="troubleshooting-monitoring-issues">ğŸ†˜ Troubleshooting Monitoring Issues</h2>
<h3 id="common-issues-solutions">Common Issues &amp; Solutions</h3>
<h4 id="issue-grafana-not-loading">Issue: Grafana Not Loading</h4>
<pre><code>âŒ Error: Grafana dashboard not accessible
âœ… Solution: Check service status and logs
   kubectl get pods -n monitoring
   kubectl logs -f deployment/grafana</code></pre>
<h4 id="issue-missing-metrics">Issue: Missing Metrics</h4>
<pre><code>âŒ Error: Prometheus not collecting metrics
âœ… Solution: Check target discovery
   kubectl get servicemonitors
   Check prometheus configuration</code></pre>
<h4 id="issue-alert-not-firing">Issue: Alert Not Firing</h4>
<pre><code>âŒ Error: Alert condition not triggering
âœ… Solution: Verify PromQL query
   Test query in Prometheus UI
   Check alert rule syntax</code></pre>
<h4 id="issue-high-resource-usage">Issue: High Resource Usage</h4>
<pre><code>âŒ Error: Monitoring consuming too many resources
âœ… Solution: Optimize scrape intervals
   Reduce data retention
   Use downsampling</code></pre>
<h3 id="debug-commands">Debug Commands</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check monitoring stack health</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get pods <span class="at">-n</span> monitoring</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View Prometheus targets</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> port-forward svc/prometheus 9090:9090</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Visit: http://localhost:9090/targets</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Check Grafana logs</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> logs <span class="at">-f</span> deployment/grafana <span class="at">-n</span> monitoring</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Validate alert rules</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get prometheusrules <span class="at">-n</span> monitoring</span></code></pre></div>
<hr />
<h2 id="summary">ğŸ“‹ Summary</h2>
<p>TCA InfraForgeâ€™s monitoring and observability stack provides <strong>enterprise-grade visibility</strong> into your platform with:</p>
<ul>
<li><strong>ğŸ“Š Complete Metrics Coverage:</strong> System, application, and business KPIs</li>
<li><strong>ğŸ“Š Beautiful Visualizations:</strong> Pre-built and custom Grafana dashboards</li>
<li><strong>ğŸš¨ Intelligent Alerting:</strong> Smart alert routing and notification management</li>
<li><strong>ğŸ“ Centralized Logging:</strong> Full log aggregation and analysis</li>
<li><strong>ğŸ”§ Custom Metrics:</strong> Application-specific performance tracking</li>
</ul>
<h3 id="key-takeaways">Key Takeaways</h3>
<ol type="1">
<li><strong>Three Pillars:</strong> Metrics, logs, and traces provide complete observability</li>
<li><strong>Proactive Monitoring:</strong> Catch issues before they become problems</li>
<li><strong>Custom Dashboards:</strong> Tailor monitoring to your specific needs</li>
<li><strong>Smart Alerting:</strong> Prevent alert fatigue with intelligent routing</li>
<li><strong>Business Focus:</strong> Track both technical and business metrics</li>
</ol>
<hr />
<h2 id="whats-next">ğŸ¯ Whatâ€™s Next?</h2>
<p>Now that you understand monitoring, youâ€™re ready to:</p>
<ol type="1">
<li><strong><a href="./09-security-compliance.md">ğŸ”’ Security &amp; Compliance</a></strong> - Understand security implementations</li>
<li><strong><a href="./10-cloudflare-integration.md">â˜ï¸ Cloudflare Integration</a></strong> - Set up external access</li>
<li><strong><a href="./11-performance-optimization.md">ğŸ› ï¸ Advanced Configuration</a></strong> - Optimize performance</li>
</ol>
<p><strong>ğŸ’¡ Pro Tip:</strong> Start with the pre-configured dashboards, then gradually add custom metrics and alerts as you understand your platformâ€™s specific monitoring needs!</p>
<hr />
<h2 id="implemented-monitoring-stack">ğŸ“ˆ Implemented Monitoring Stack</h2>
<p>TCA InfraForge comes with a <strong>production-ready monitoring setup</strong>:</p>
<h3 id="pre-configured-components">Pre-Configured Components</h3>
<ul>
<li><strong>Prometheus</strong>: Metrics collection and storage</li>
<li><strong>Grafana</strong>: Visualization dashboards</li>
<li><strong>AlertManager</strong>: Alert routing and management</li>
<li><strong>Node Exporter</strong>: System-level metrics</li>
<li><strong>Fluent Bit</strong>: Log aggregation</li>
</ul>
<h3 id="automatic-setup">Automatic Setup</h3>
<p>All monitoring components are deployed automatically through the <strong>Kustomize manifests</strong>. No manual configuration required!</p>
<h3 id="access-points">Access Points</h3>
<ul>
<li><strong>Grafana</strong>: <code>kubectl port-forward svc/prometheus-grafana 3000:80</code></li>
<li><strong>Prometheus</strong>: <code>kubectl port-forward svc/prometheus-kube-prometheus-prometheus 9090:9090</code></li>
</ul>
<hr />
<p><em>Ready to secure your platform? Letâ€™s move to the Security &amp; Compliance chapter to understand how TCA InfraForge protects your enterprise data!</em> ğŸ”’</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });

        // Add copy buttons to code blocks
        document.querySelectorAll('pre').forEach(pre => {
            const button = document.createElement('button');
            button.className = 'btn btn-sm btn-outline-primary copy-btn';
            button.innerHTML = '<i class="fas fa-copy"></i>';
            button.style.position = 'absolute';
            button.style.top = '10px';
            button.style.right = '10px';
            pre.style.position = 'relative';
            pre.appendChild(button);
            button.addEventListener('click', () => {
                const code = pre.querySelector('code') ? pre.querySelector('code').textContent : pre.textContent;
                navigator.clipboard.writeText(code).then(() => {
                    button.innerHTML = '<i class="fas fa-check"></i>';
                    setTimeout(() => button.innerHTML = '<i class="fas fa-copy"></i>', 2000);
                });
            });
        });

        // Dark mode toggle
        const darkModeToggle = document.getElementById('darkModeToggle');
        darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const icon = darkModeToggle.querySelector('i');
            if (document.body.classList.contains('dark-mode')) {
                darkModeToggle.innerHTML = '<i class="fas fa-sun"></i> Light';
                localStorage.setItem('darkMode', 'enabled');
            } else {
                darkModeToggle.innerHTML = '<i class="fas fa-moon"></i> Dark';
                localStorage.setItem('darkMode', 'disabled');
            }
        });

        // Load dark mode preference
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
            darkModeToggle.innerHTML = '<i class="fas fa-sun"></i> Light';
        }

        // Reading progress
        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset;
            const docHeight = document.body.offsetHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            document.getElementById('progressBar').style.width = scrollPercent + '%';
        });

        // Back to top
        const backToTopBtn = document.getElementById('backToTop');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTopBtn.style.display = 'block';
            } else {
                backToTopBtn.style.display = 'none';
            }
        });
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
            let found = false;
            headings.forEach(h => {
                if (!found && h.textContent.toLowerCase().includes(query)) {
                    h.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    found = true;
                }
            });
        });

        // Get current page number from filename
        const currentPath = window.location.pathname;
        const fileName = currentPath.split('/').pop();

        const pageFiles = [
            '01-executive-summary.html',
            '02-architecture-overview.html',
            '03-quick-start-guide.html',
            '04-automated-deployment.html',
            '05-container-kubernetes.html',
            '06-networking-ingress.html',
            '07-monitoring-observability.html',
            '08-enterprise-applications.html',
            '09-security-compliance.html',
            '10-cloudflare-integration.html',
            '10-troubleshooting-guide.html',
            '11-performance-optimization.html',
            '11-troubleshooting-guide.html',
            '12-ci-cd-pipeline.html',
            '13-contributing-development.html',
            'ABOUT.html',
            'ADVANCED-TOOLS-INTEGRATION-REPORT.html',
            'APPLE-SILICON-INTEGRATION.html',
            'BOOK.html',
            'CLOUDFLARE-DNS-CLI-SETUP.html',
            'CONSOLIDATION-COMPLETE.html',
            'ENHANCEMENT-DOCUMENTATION.html',
            'GHCR-SETUP-GUIDE.html',
            'INDEX.html',
            'KUBERNETES-TROUBLESHOOTING.html',
            'MAC-MINI-QUICKSTART.html',
            'README.html',
            'SCRIPT-SECURITY-AUDIT.html',
            'SECURITY-SETUP-GUIDE.html'
        ];

        const pageTitles = pageFiles.map(file => file.replace('.html', '').replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()));

        let currentPage = pageFiles.indexOf(fileName) + 1;
        if (currentPage === 0) currentPage = 1; // for index.html or others

        const totalPages = pageFiles.length;

        // Generate pagination
        const pagination = document.getElementById('pagination');
        for (let i = 1; i <= totalPages; i++) {
            const li = document.createElement('li');
            li.className = 'page-item' + (i === currentPage ? ' active' : '');
            const a = document.createElement('a');
            a.className = 'page-link';
            a.href = pageFiles[i - 1];
            a.textContent = i;
            li.appendChild(a);
            pagination.appendChild(li);
        }

        // Update dropdown
        const dropdown = document.querySelector('.dropdown-menu');
        dropdown.innerHTML = '';
        pageFiles.forEach((file, index) => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.className = 'dropdown-item';
            a.href = file;
            a.textContent = `${index + 1}. ${pageTitles[index]}`;
            li.appendChild(a);
            dropdown.appendChild(li);
        });

        // Prev/Next buttons
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        if (currentPage > 1) {
            prevBtn.onclick = () => window.location.href = pageFiles[currentPage - 2];
        } else {
            prevBtn.disabled = true;
        }

        if (currentPage < totalPages) {
            nextBtn.onclick = () => window.location.href = pageFiles[currentPage];
        } else {
            nextBtn.disabled = true;
        }
    </script>
</body>

</html>
<button id="backToTop" class="btn btn-primary" style="position: fixed; bottom: 20px; right: 20px; display: none; z-index: 1001;"><i class="fas fa-arrow-up"></i></button>